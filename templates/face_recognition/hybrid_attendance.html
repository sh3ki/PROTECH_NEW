{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROTECH - Face Recognition Time In/Out</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'public/images/protechlogowhite.png' %}">
    <link rel="shortcut icon" href="{% static 'public/images/protechlogowhite.png' %}">
    <link rel="apple-touch-icon" href="{% static 'public/images/protechlogowhite.png' %}">
    
    <!-- TailwindCSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#023c82',      /* Dark blue */
                        secondary: '#4c9cfc',    /* Medium blue */
                        tertiary: '#7cb4fc',     /* Light blue */
                        accent: '#7c848c',       /* Medium gray */
                        light: '#c4cfdb',        /* Light gray/blue */
                        dark: '#3c444c',         /* Dark gray */
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer components {
            .school-btn {
                @apply text-white bg-primary hover:bg-secondary py-3 px-8 rounded-lg font-semibold transition-all duration-300 shadow-md hover:shadow-lg text-center;
            }
            .back-btn {
                @apply flex items-center justify-center gap-2 px-6 py-2 bg-secondary text-white hover:bg-tertiary rounded-full transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg font-medium;
            }
            .toggle-checkbox:checked {
                @apply right-0 border-secondary;
                background-color: #4c9cfc;
            }
            .toggle-checkbox:checked + .toggle-label {
                @apply bg-tertiary;
            }
            /* New component styles */
            .webcam-container {
                @apply bg-gradient-to-br from-gray-800 to-gray-900 dark:from-gray-900 dark:to-black rounded-xl shadow-xl border border-gray-700 dark:border-gray-800 flex flex-col;
            }
            .info-card {
                @apply bg-gray-100 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 transition-all duration-300 hover:shadow-md;
            }
            .dropdown {
                @apply bg-white dark:bg-gray-700 text-gray-800 dark:text-white rounded-lg border-2 border-gray-300 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-secondary focus:border-secondary;
            }
            .status-badge {
                @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
            }
        }
        
        /* Dark mode styles */
        html.dark {
            @apply bg-dark text-light;
        }

        /* Webcam placeholder animation */
        .pulse-ring {
            animation: pulse-ring 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }
        @keyframes pulse-ring {
            0% {
                transform: scale(0.95);
                opacity: 0.5;
            }
            50% {
                transform: scale(1);
                opacity: 0.75;
            }
            100% {
                transform: scale(0.95);
                opacity: 0.5;
            }
        }

        /* Scrollbar styling */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            @apply bg-gray-100 dark:bg-gray-800 rounded-full;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            @apply bg-gray-400 dark:bg-gray-600 rounded-full hover:bg-secondary dark:hover:bg-secondary transition-colors duration-200;
        }
    </style>
</head>
<body class="bg-light dark:bg-dark text-dark dark:text-light min-h-screen flex flex-col transition-colors duration-300" data-attendance-type="hybrid">
    <!-- Background image with overlay -->
    <div class="fixed inset-0 z-[-1] bg-white/40 dark:bg-gray-800/30">
        <img src="{% static 'public/images/protechlogo.svg' %}" alt="Background"
             class="w-full h-full object-cover mix-blend-overlay select-none pointer-events-none opacity-40 dark:opacity-20" />
    </div>

    <!-- Header -->
    <header class="bg-primary/95 backdrop-blur-sm shadow-lg mb-4">
        <div class="py-3 flex justify-between items-center px-6">
            <div class="flex items-center space-x-2">
                <a href="{% url 'landing_page' %}" class="flex items-center gap-2 font-bold text-white text-2xl">
                    <img src="{% static 'public/images/protechlogo.svg' %}" alt="PROTECH Logo" class="h-10 w-10 hover:scale-105 transition-transform" />
                    <span class="inline-block font-extrabold italic tracking-tight leading-tight text-xs ml-1" style="font-family: 'Arial Black', Arial, sans-serif;">
                      DETECT<br>TO PROTECT
                    </span>
                </a>
            </div>
            <div class="transform hover:scale-[1.01] transition-transform">
                <span class="inline-block font-bold tracking-tight leading-tight text-2xl text-white ml-1" style="font-family: 'Arial Black', Arial, sans-serif;">
                    <span class="text-tertiary">PROTECH</span>: FACE RECOGNITION TIME IN/OUT
                </span>
            </div>
            <div class="flex items-center gap-4">
                <!-- Dark mode toggle -->
                <button id="theme-toggle" class="relative inline-flex items-center h-10 rounded-full w-20 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 bg-gray-200 dark:bg-gray-700" aria-label="Toggle dark mode">
                    <span class="sr-only">Toggle dark mode</span>
                    <span id="toggle-switch" class="inline-flex items-center justify-center h-8 w-8 transform transition-transform duration-300 ease-in-out translate-x-1 bg-white dark:bg-gray-800 rounded-full shadow-md">
                        <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500 transition-opacity duration-200" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
                        </svg>
                        <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400 absolute transition-opacity duration-200 opacity-0" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                        </svg>
                    </span>
                </button>
            </div>
        </div>
    </header>
    
    <!-- Main content - Cameras on top, Records below -->
    <main class="flex-grow animate-fade-in px-6 pb-6">
        <div class="flex flex-col gap-4">
            
            <!-- ========== TOP SECTION: BOTH CAMERAS SIDE BY SIDE ========== -->
            <div class="flex gap-4 h-[500px]">
                <!-- TIME IN Camera -->
                <div class="flex-1 webcam-container">
                    <!-- Status indicator bar -->
                    <div class="bg-gradient-to-r from-primary to-secondary px-4 py-2 flex justify-between items-center">
                        <div class="flex items-center">
                            <div id="timein-camera-status" class="flex items-center">
                                <span class="relative flex h-3 w-3 mr-2">
                                    <span id="timein-status-indicator" class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                                    <span id="timein-status-dot" class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                                </span>
                                <span id="timein-status-text" class="text-white font-medium">TIME IN - Inactive</span>
                            </div>
                        </div>
                        
                        <!-- Camera selection dropdown -->
                        <div class="flex items-center space-x-3">
                            <label for="timein-camera-select" class="text-white font-medium">Camera:</label>
                            <select id="timein-camera-select" class="dropdown py-1 px-3 text-sm">
                                <option value="">Select a camera</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Webcam placeholder/feed container -->
                    <div class="flex-1 flex items-center justify-center relative bg-black/40">
                        <!-- Camera placeholder -->
                        <div id="timein-camera-placeholder" class="absolute inset-0 flex flex-col items-center justify-center text-white">
                            <div class="w-24 h-24 rounded-full bg-gray-700/50 pulse-ring flex items-center justify-center mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                            </div>
                            <p class="text-xl font-medium text-center">TIME IN Camera</p>
                            <p class="text-sm text-gray-400 mt-1">Select a camera from the dropdown above</p>
                        </div>
                        
                        <!-- Video element -->
                        <video id="timein-webcam" autoplay playsinline muted style="position: absolute; z-index: 1; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain;"></video>
                        
                        <!-- Canvas overlay -->
                        <canvas id="timein-overlay-canvas" style="position: absolute !important; z-index: 999 !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; pointer-events: none !important;"></canvas>
                        
                        <!-- FPS Counter -->
                        <div class="absolute top-4 right-4 bg-black/70 text-white px-3 py-2 rounded-lg z-[1000]">
                            <span id="timein-fps-counter" class="text-green-500 font-bold">0 FPS</span>
                        </div>
                    </div>
                </div>
                
                <!-- TIME OUT Camera -->
                <div class="flex-1 webcam-container">
                    <!-- Status indicator bar -->
                    <div class="bg-gradient-to-r from-indigo-600 to-indigo-500 px-4 py-2 flex justify-between items-center">
                        <div class="flex items-center">
                            <div id="timeout-camera-status" class="flex items-center">
                                <span class="relative flex h-3 w-3 mr-2">
                                    <span id="timeout-status-indicator" class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                                    <span id="timeout-status-dot" class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                                </span>
                                <span id="timeout-status-text" class="text-white font-medium">TIME OUT - Inactive</span>
                            </div>
                        </div>
                        
                        <!-- Camera selection dropdown -->
                        <div class="flex items-center space-x-3">
                            <label for="timeout-camera-select" class="text-white font-medium">Camera:</label>
                            <select id="timeout-camera-select" class="dropdown py-1 px-3 text-sm">
                                <option value="">Select a camera</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Webcam placeholder/feed container -->
                    <div class="flex-1 flex items-center justify-center relative bg-black/40">
                        <!-- Camera placeholder -->
                        <div id="timeout-camera-placeholder" class="absolute inset-0 flex flex-col items-center justify-center text-white">
                            <div class="w-24 h-24 rounded-full bg-gray-700/50 pulse-ring flex items-center justify-center mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                            </div>
                            <p class="text-xl font-medium text-center">TIME OUT Camera</p>
                            <p class="text-sm text-gray-400 mt-1">Select a camera from the dropdown above</p>
                        </div>
                        
                        <!-- Video element -->
                        <video id="timeout-webcam" autoplay playsinline muted style="position: absolute; z-index: 1; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain;"></video>
                        
                        <!-- Canvas overlay -->
                        <canvas id="timeout-overlay-canvas" style="position: absolute !important; z-index: 999 !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; pointer-events: none !important;"></canvas>
                        
                        <!-- FPS Counter -->
                        <div class="absolute top-4 right-4 bg-black/70 text-white px-3 py-2 rounded-lg z-[1000]">
                            <span id="timeout-fps-counter" class="text-green-500 font-bold">0 FPS</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ========== BOTTOM SECTION: ATTENDANCE RECORDS SIDE BY SIDE ========== -->
            <div class="flex gap-4 h-[300px]">
                <!-- TIME IN Records -->
                <div class="flex-1 flex flex-col rounded-xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800">
                    <!-- Header section -->
                    <div class="bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center mb-2">
                            <h2 class="text-xl font-bold text-primary dark:text-tertiary">Time In Records</h2>
                            <div class="bg-primary/10 dark:bg-tertiary/20 rounded-full px-3 py-1 text-sm font-medium text-primary dark:text-tertiary">
                                <span id="timein-student-count">0</span> Present
                            </div>
                        </div>
                        <div class="flex space-x-2 text-sm text-gray-600 dark:text-gray-400">
                            <span>Today: <span id="timein-today-date">{% now "F j, Y" %}</span></span>
                        </div>
                    </div>
                    
                    <!-- Scrollable content area -->
                    <div class="flex-1 overflow-y-auto custom-scrollbar bg-gray-50 dark:bg-gray-900/60">
                        <div id="timein-student-list" class="p-4 space-y-3">
                            <!-- Populated dynamically -->
                        </div>
                    </div>
                </div>
                
                <!-- TIME OUT Records -->
                <div class="flex-1 flex flex-col rounded-xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800">
                    <!-- Header section -->
                    <div class="bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">
                        <div class="flex justify-between items-center mb-2">
                            <h2 class="text-xl font-bold text-indigo-700 dark:text-indigo-300">Time Out Records</h2>
                            <div class="bg-indigo-600/10 dark:bg-indigo-400/20 rounded-full px-3 py-1 text-sm font-medium text-indigo-700 dark:text-indigo-300">
                                <span id="timeout-student-count">0</span> Present
                            </div>
                        </div>
                        <div class="flex space-x-2 text-sm text-gray-600 dark:text-gray-400">
                            <span>Today: <span id="timeout-today-date">{% now "F j, Y" %}</span></span>
                        </div>
                    </div>
                    
                    <!-- Scrollable content area -->
                    <div class="flex-1 overflow-y-auto custom-scrollbar bg-gray-50 dark:bg-gray-900/60">
                        <div id="timeout-student-list" class="p-4 space-y-3">
                            <!-- Populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- TIME IN Camera test modal with improved design -->
    <div id="timein-camera-test-modal" class="fixed inset-0 z-50 hidden">
        <!-- Modal backdrop with blur effect -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-all duration-300"></div>
        
        <!-- Modal content - centered with improved design -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 w-11/12 max-w-2xl rounded-xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700 transition-all duration-300">
            <!-- Modal header with gradient -->
            <div class="bg-gradient-to-r from-primary to-secondary px-5 py-4 flex justify-between items-center">
                <h3 class="text-lg font-semibold text-white flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    TIME IN Camera Test
                </h3>
                <button id="timein-close-modal" class="text-white hover:bg-white/20 rounded-full p-1 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <!-- Modal body with improved design -->
            <div class="p-6 flex flex-col items-center">
                <p class="mb-4 text-gray-700 dark:text-gray-300 text-center">
                    Testing your camera feed. Please make sure the camera is working fine before confirming.
                </p>
                
                <!-- Camera preview with better styling -->
                <div class="bg-black rounded-lg overflow-hidden w-full h-120 mb-4 shadow-inner border border-gray-700">
                    <video id="timein-test-video" autoplay playsinline muted class="w-full h-full object-cover" style="transform: scaleX(-1);"></video>
                </div>
                
                <!-- Modal footer with improved buttons -->
                <div class="flex justify-center gap-6 mt-6">
                    <button id="timein-cancel-camera" class="px-8 py-2.5 bg-gradient-to-r from-gray-300 to-gray-200 dark:from-gray-700 dark:to-gray-800 text-gray-700 dark:text-gray-100 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-0.5 hover:shadow-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-500 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                        Cancel
                    </button>
                    <button id="timein-confirm-camera" class="px-8 py-2.5 bg-gradient-to-r from-secondary to-tertiary text-white font-medium rounded-lg shadow-md transition-all duration-300 transform hover:-translate-y-0.5 hover:shadow-lg hover:from-secondary/90 hover:to-tertiary/90 focus:outline-none focus:ring-2 focus:ring-tertiary focus:ring-offset-2 dark:focus:ring-offset-gray-800 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        Confirm Camera
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- TIME OUT Camera test modal with improved design -->
    <div id="timeout-camera-test-modal" class="fixed inset-0 z-50 hidden">
        <!-- Modal backdrop with blur effect -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-all duration-300"></div>
        
        <!-- Modal content - centered with improved design -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 w-11/12 max-w-2xl rounded-xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700 transition-all duration-300">
            <!-- Modal header with gradient -->
            <div class="bg-gradient-to-r from-indigo-600 to-indigo-500 px-5 py-4 flex justify-between items-center">
                <h3 class="text-lg font-semibold text-white flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    TIME OUT Camera Test
                </h3>
                <button id="timeout-close-modal" class="text-white hover:bg-white/20 rounded-full p-1 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <!-- Modal body with improved design -->
            <div class="p-6 flex flex-col items-center">
                <p class="mb-4 text-gray-700 dark:text-gray-300 text-center">
                    Testing your camera feed. Please make sure the camera is working fine before confirming.
                </p>
                
                <!-- Camera preview with better styling -->
                <div class="bg-black rounded-lg overflow-hidden w-full h-120 mb-4 shadow-inner border border-gray-700">
                    <video id="timeout-test-video" autoplay playsinline muted class="w-full h-full object-cover" style="transform: scaleX(-1);"></video>
                </div>
                
                <!-- Modal footer with improved buttons -->
                <div class="flex justify-center gap-6 mt-6">
                    <button id="timeout-cancel-camera" class="px-8 py-2.5 bg-gradient-to-r from-gray-300 to-gray-200 dark:from-gray-700 dark:to-gray-800 text-gray-700 dark:text-gray-100 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-0.5 hover:shadow-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-500 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                        Cancel
                    </button>
                    <button id="timeout-confirm-camera" class="px-8 py-2.5 bg-gradient-to-r from-indigo-600 to-indigo-500 text-white font-medium rounded-lg shadow-md transition-all duration-300 transform hover:-translate-y-0.5 hover:shadow-lg hover:from-indigo-600/90 hover:to-indigo-500/90 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        Confirm Camera
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer with improved design -->
    <footer class="bg-primary/95 backdrop-blur-sm text-white py-3 border-t border-primary">
        <div class="text-center">
            <p>&copy; {% now "Y" %} PROTECH. All rights reserved.</p>
        </div>
    </footer>

    <!-- Dark mode toggle script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const html = document.documentElement;
            const themeToggle = document.getElementById('theme-toggle');
            const toggleSwitch = document.getElementById('toggle-switch');
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            
            const isDarkMode = localStorage.getItem('darkMode') !== 'false';
            
            if (isDarkMode) {
                html.classList.add('dark');
                toggleSwitch.classList.add('translate-x-11');
                toggleSwitch.classList.remove('translate-x-1');
                sunIcon.classList.add('opacity-0');
                moonIcon.classList.remove('opacity-0');
            }
            
            themeToggle.addEventListener('click', () => {
                const isDark = html.classList.contains('dark');
                
                if (isDark) {
                    html.classList.remove('dark');
                    localStorage.setItem('darkMode', 'false');
                    toggleSwitch.classList.remove('translate-x-11');
                    toggleSwitch.classList.add('translate-x-1');
                    sunIcon.classList.remove('opacity-0');
                    moonIcon.classList.add('opacity-0');
                } else {
                    html.classList.add('dark');
                    localStorage.setItem('darkMode', 'true');
                    toggleSwitch.classList.add('translate-x-11');
                    toggleSwitch.classList.remove('translate-x-1');
                    sunIcon.classList.add('opacity-0');
                    moonIcon.classList.remove('opacity-0');
                }
            });
        });
    </script>
    
    <!-- Camera selection and testing script for BOTH cameras -->
    <script src="{% static 'js/hybrid-camera-manager.js' %}"></script>
    
    <!-- face-api.js for detection and embeddings -->
    <script src="https://cdn.jsdelivr.net/npm/@vladmandic/face-api@1.7.12/dist/face-api.min.js" crossorigin="anonymous"></script>
    
    <!-- Hybrid Face Recognition System - Dual camera support for TIME IN and TIME OUT -->
    <script src="{% static 'js/hybrid-face-recognition.js' %}"></script>
</body>
</html>
